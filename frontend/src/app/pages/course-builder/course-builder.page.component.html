<!--This contains the graph control menu options.-->
<p-speedDial [model]="dial_items" [radius]="75" direction="down-right" type="quarter-circle"></p-speedDial>

<!--This displays the graph of the course.-->
<div #graphComponentContainer style="width: 100%; height: 100%;">

  <graph #graphComponent class="course-view-graph-container" [edges]="this.edges" [nodes]="this.nodes"
    [clusters]="this.clusters" [layoutSettings]="courseViewGraphSettings" (nodeClicked)="onNodeClick($event)"></graph>

</div>
<p-contextMenu [target]="graphComponentContainer" [model]="contextMenuItems"></p-contextMenu>

<!--This is a dialog component to display whenever a node is clicked.-->
<p-dialog header="Header" [draggable]="false" [(visible)]="dialogVisible" [position]="'bottomright'"
  [style]="{ width: '33vw' }">
  <ng-template pTemplate="header">
    <div class="dialog-header">
      <p-avatar image="https://primefaces.org/cdn/primeng/images/avatar/amyelsner.png" shape="circle" />
      <span class="dialog-header-text">{{selectedNode.label}}</span>
    </div>
  </ng-template>
  <div style="display: flex; align-items: center; gap: 0.5em;">
    <p-tag *ngFor="let tag of selectedNode?.data.tags" value="{{tag}}"></p-tag>
  </div>
  <p class="m-0">
    {{selectedNode?.data.short_description}}
  </p>
  <ng-template pTemplate="footer">
    <!--TODO: Have click go to lesson page-->
    <p-button [routerLink]="['/lesson', selectedNode.label]" icon="pi pi-book" (click)="dialogVisible = false"
      label="View Lesson" pAutoFocus [autofocus]="false" [style]="{margin: '0'}" />
  </ng-template>
</p-dialog>