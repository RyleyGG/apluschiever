
<form #myForm="ngForm">
    <div *ngIf="!submitted">
    <div *ngFor="let question of questions; let i = index">
        <div style="margin: 0 0 0.7rem 0; padding: 0; display: flex; flex-direction: row; align-items: center;">
            <span style="font-weight: 700; font-size: 1.5rem; margin-right: 0.7rem; color: var(--primary-color)">
                {{i + 1}}.
            </span>
            <div>{{ question.question_text }}</div>
        </div>

        <div style="margin-left: 8px; margin-bottom: 15px; display: flex; flex-direction: column; gap: 1.2em;">
            <div *ngFor="let option of question.options;">
                <p-checkbox [disabled]="submitted" [inputId]="question.question_text + '_' + option"
                    name="optionGroup{{ question.question_text }}" value="{{ option }}"
                    [(ngModel)]="selectedOptions[question.question_text]" />
                <label [for]="question.question_text + '_' + option" style="margin-left: 0.5rem;">{{ option }}</label>
            </div>
        </div>
    </div>
    <div class="buttons">
        <p-button [rounded]="true" [style]="{'width': '100%'}" type="button" label="Submit" (click)="submit()"></p-button>
        <p-button [rounded]="true" [style]="{'width': '100%'}" type="button" label="Reset" (click)="reset()"></p-button>
    </div>
</div>
<div *ngIf="submitted && feedback.length">
    <div id="resultForm" *ngFor="let question of questions; let i = index">
        <div style="margin: 0 0 0.7rem 0; padding: 0; display: flex; flex-direction: row; align-items: center;">
            <div *ngIf="!feedback[i].correct" style="font-size: large; color: red; font-weight: 900; margin-right: 5px;"><i class="pi pi-times"></i></div>
            <div *ngIf="feedback[i].correct" style="font-size: large; color: rgb(11, 200, 11); font-weight: 900; margin-right: 5px;"><i class="pi pi-check"></i></div>
            <span style="font-weight: 700; font-size: 1.5rem; margin-right: 0.7rem; color: var(--primary-color)">
                {{i + 1}}.
            </span>
            <div>{{ question.question_text }}</div>
        </div>

        <div style="margin-left: 8px; margin-bottom: 15px; display: flex; flex-direction: column; gap: 1em;">
            <div *ngFor="let option of question.options;" [class.wrong]="!feedback[i].correct && isThisOption(question.question_text, option)">
                <p-checkbox [disabled]="true" [inputId]="question.question_text + '_' + option"
                    name="optionGroup{{ question.question_text }}" value="{{ option }}"
                    [(ngModel)]="selectedOptions[question.question_text]" />
                <label [for]="question.question_text + '_' + option" style="margin-left: 0.5rem;">{{ option }}</label>
            </div>
        </div>
    </div>
    <div class="results">
        Score: {{ score| number:'1.2-2' }} %
        <p-button [rounded]="true" type="button" label="Try Again" (click)="reset()"></p-button>
    </div>
</div>
</form>
